author: Edanur & Thomas
date: 7/30/2019
meta-json: {"date":"7/30/2019","output":{"md_document":{"variant":"markdown\\_mmd","toc":true}},"author":"Edanur & Thomas","title":"blogpost"}
output: 
title: blogpost

-   [Data Exploration](#data-exploration)
-   [Business Index](#business-index)
    -   [GATES](#gates)
    -   [Causal Random Forest](#causal-random-forest)
    -   [Two-model Approach](#two-model-approach)
    -   [Partial Dependence Plots](#partial-dependence-plots)
    -   [Advanced Partial Dependence
        Plots](#advanced-partial-dependence-plots)
    -   [Comparison](#comparison)
-   [Women Empowerment Index](#women-empowerment-index)
-   [Consumption Index](#consumption-index)

Data Exploration
================

    endline1 <- load_endline1()
    str(endline1)

    ## 'data.frame':    6129 obs. of  56 variables:
    ##  $ hhid                      : int  1 2 3 4 5 6 7 8 9 11 ...
    ##  $ areaid                    : int  1 1 1 1 1 1 1 1 1 1 ...
    ##  $ treatment                 : int  1 1 1 1 1 1 1 1 1 1 ...
    ##  $ old_biz                   : num  0 0 1 1 1 1 0 0 1 0 ...
    ##  $ hhsize_adj_1              : num  2.8 3.24 4.18 4.03 5.41 ...
    ##  $ adults_1                  : num  3 2 2 2 4 3 4 2 7 4 ...
    ##  $ children_1                : num  0 2 3 3 2 3 0 2 0 0 ...
    ##  $ male_head_1               : int  1 1 1 1 1 1 1 1 1 0 ...
    ##  $ head_age_1                : int  20 34 40 37 32 40 43 31 62 48 ...
    ##  $ head_noeduc_1             : num  1 0 0 0 0 1 1 0 0 1 ...
    ##  $ women1845_1               : num  2 1 1 1 1 1 2 1 2 1 ...
    ##  $ anychild1318_1            : num  0 0 1 1 1 1 1 0 1 0 ...
    ##  $ spouse_works_wage_1       : int  0 1 0 1 0 0 0 0 0 0 ...
    ##  $ ownland_hyderabad_1       : num  0 0 0 0 0 0 1 0 0 0 ...
    ##  $ ownland_village_1         : int  0 0 1 0 1 0 0 0 0 0 ...
    ##  $ spandana_1                : int  1 0 0 0 0 1 0 1 0 0 ...
    ##  $ othermfi_1                : int  0 0 0 0 0 0 0 0 0 0 ...
    ##  $ anybank_1                 : int  0 0 0 0 0 0 0 0 0 0 ...
    ##  $ anyinformal_1             : int  1 0 1 1 0 1 0 0 0 1 ...
    ##  $ anyloan_1                 : num  1 0 0 1 1 1 1 1 1 0 ...
    ##  $ everlate_1                : int  1 0 1 1 0 0 0 1 0 0 ...
    ##  $ mfi_loan_cycles_1         : num  1 0 0 0 0 3 0 1 0 0 ...
    ##  $ spandana_amt_1            : num  1961 0 0 0 0 ...
    ##  $ othermfi_amt_1            : num  0 0 0 0 0 0 0 0 0 0 ...
    ##  $ bank_amt_1                : num  0 0 0 0 0 0 0 0 0 0 ...
    ##  $ informal_amt_1            : num  10193 0 6538 6538 0 ...
    ##  $ anyloan_amt_1             : num  12617 0 0 5634 2506 ...
    ##  $ bizassets_1               : num  0 0 2000 0 31700 0 0 0 0 0 ...
    ##  $ bizinvestment_1           : num  0 0 0 0 0 0 0 0 0 0 ...
    ##  $ bizrev_1                  : num  0 0 1800 5000 12400 7560 2170 0 2300 0 ...
    ##  $ bizexpense_1              : num  0 0 205 205 8750 ...
    ##  $ bizprofit_1               : num  0 0 1595 4795 3650 ...
    ##  $ bizemployees_1            : num  0 0 0 0 0 0 0 0 0 0 ...
    ##  $ total_biz_1               : num  0 0 1 1 1 1 2 0 2 0 ...
    ##  $ newbiz_1                  : num  0 0 0 0 0 0 1 0 0 0 ...
    ##  $ female_biz_1              : num  0 0 0 0 0 0 1 0 1 0 ...
    ##  $ female_biz_new_1          : num  0 0 0 0 0 0 1 0 0 0 ...
    ##  $ wages_nonbiz_1            : int  2000 3900 5000 1500 0 500 0 2000 3950 3600 ...
    ##  $ hours_week_biz_1          : num  0 0 21 77 70 126 0 0 152 0 ...
    ##  $ hours_week_outside_1      : num  48 8 0 0 0 0 0 0 0 4 ...
    ##  $ hours_headspouse_outside_1: num  48 4 0 63 0 0 0 32 0 0 ...
    ##  $ hours_headspouse_biz_1    : num  0 4 49 14 70 70 0 0 56 4 ...
    ##  $ durables_exp_mo_pc_1      : num  2.868 0.981 5.54 4.169 2.868 ...
    ##  $ nondurable_exp_mo_pc_1    : num  0.312 0.107 0.604 0.454 0.312 ...
    ##  $ food_exp_mo_pc_1          : num  42.2 73.2 65.4 68.1 44.8 ...
    ##  $ health_exp_mo_pc_1        : num  9.73 6.17 5.21 0 4.03 ...
    ##  $ temptation_exp_mo_pc_1    : num  6.62 0 2.61 0 0 ...
    ##  $ festival_exp_mo_pc_1      : num  1.95 9.25 4.34 9.01 1.34 ...
    ##  $ home_durable_index_1      : num  2.69 2.2 2.46 1.3 2.65 ...
    ##  $ women_emp_index_1         : num  -0.4154 0.5629 -0.0623 -0.368 -0.3653 ...
    ##  $ credit_index_1            : num  1.136 -0.492 -0.417 -0.178 -0.269 ...
    ##  $ biz_index_all_1           : num  -0.224 -0.224 0.0651 0.0827 0.3603 ...
    ##  $ income_index_1            : num  -0.160999 0.081633 0.296675 -0.000669 -0.245753 ...
    ##  $ labor_index_1             : num  -0.1042 -0.6321 -0.3271 0.051 -0.0195 ...
    ##  $ consumption_index_1       : num  -0.1662 -0.0296 -0.088 -0.2396 -0.2112 ...
    ##  $ social_index_1            : num  -0.0783 0.2015 -0.0965 -0.1182 -0.1703 ...
    ##  - attr(*, "na.action")= 'omit' Named int  27 109 185 239 241 290 419 511 529 612 ...
    ##   ..- attr(*, "names")= chr  "27" "109" "185" "239" ...

Business Index
==============

    target_index <- "biz_index_all_1"

    endline1_biz <- endline1 %>%
      filter(total_biz_1 != 0) %>%
      select(everything(),
             -hhid,
             -contains("biz"),
             -anyloan_1,
             -anyloan_amt_1,
             -contains("index"), # prevent confounding
             target_index)       # add target index

    target_index <- "biz_index_all_1"

    endline1_biz_noexp <- endline1 %>%
      filter(total_biz_1 != 0) %>%
      select(everything(),
             -hhid,
             -contains("biz"),
             -anyloan_1,
             -anyloan_amt_1,
             -contains("exp"),   # prevent confounding
             -contains("index"), # prevent confounding
             target_index)       # add target index

GATES
-----

![](blogpost_files/figure-markdown_mmd/biz_gates-1.png)

Causal Random Forest
--------------------

Two-model Approach
------------------

![](blogpost_files/figure-markdown_mmd/biz_tm-1.png)

Partial Dependence Plots
------------------------

Advanced Partial Dependence Plots
---------------------------------

Comparison
----------

Women Empowerment Index
=======================

Consumption Index
=================
